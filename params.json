{"name":"F5-big-ip-blacklist","tagline":"Update a data list on F5 BIG-IP devices to block IP's listed at blocklist.de ","body":"# F5-BIG-IP-Blacklist\r\nThis is a quick script I threw together to update IP block lists on a couple of F5 BIG-IP 1600's I used to play with (manage and maintain).\r\n\r\nI used the awesome blocklist from the guys over at: [blocklist.de](http://www.blocklist.de/en/index.html) - THANKS GUYS!\r\n\r\n## Requirements\r\nYou'll need to install the bigsuds python package:\r\n```\r\nsudo pip install bigsuds\r\n```\r\nYou'll also need to add an irule that checks the client IP against the \"ext_blocklist\" data group, a very simple example:\r\n```\r\nwhen HTTP_REQUEST {\r\n    if { [class match [IP::client_addr] equals \"ext_blocklist\" ] } {\r\n        drop\r\n    }\r\n}\r\n\r\n```\r\nI recently updated the utility to accept command line arguments. This makes it easy to run against multiple devices and schedule a regular update task as a cron job.\r\n\r\n```\r\nusage: update_blocklist.py [-h] -a HOST -u USERNAME -p PASSWORD -g DEVICEGROUP\r\n                           [-d PARTITION]\r\n\r\nUpdate blocklist.de data group on F5 BIG-IP device.\r\n\r\noptional arguments:\r\n  -h, --help            show this help message and exit\r\n  -a HOST, --host HOST  ip address of an F5 BIG-IP device\r\n  -u USERNAME, --username USERNAME\r\n                        user to authenticate with\r\n  -p PASSWORD, --password PASSWORD\r\n                        password to authenticate with\r\n  -g DEVICEGROUP, --devicegroup DEVICEGROUP\r\n                        device group of the HA pair\r\n  -d PARTITION, --partition PARTITION\r\n                        partition to add the data group to\r\n```\r\nThe script itself is probably offensive to Python gurus but it does / did the job I had to get done at the time.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}